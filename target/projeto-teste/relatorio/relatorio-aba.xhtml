<ui:composition template="/templates/template.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets">

    <ui:define name="titulo">RelatÃ³rios de Medicamentos</ui:define>

    <ui:define name="conteudo">
        <h:form id="formRelatorios">

            <h1 class="p-mb-4">ðŸ“Š RelatÃ³rios de PrescriÃ§Ãµes</h1>

            <p:tabView id="tabRelatorios"
                dynamic="true"
                activeIndex="#{relatorioMedicamentosMaisPrescritoBean.activeIndex}">

                <p:ajax event="tabChange"
                        listener="#{relatorioMedicamentosMaisPrescritoBean.onTabChange}"                    
                        update="@form" />
                        <!--onstart="PF('statusDialog').show()"
                        oncomplete="PF('statusDialog').hide()"-->

                <p:tab id="abaMedicamentos" title="ðŸ’Š Medicamentos Mais Prescritos">
                    <p:panel header="Top 2 Medicamentos Mais Prescritos">
                        <p:dataTable id="tabelaMedicamentos"
                                    value="#{relatorioMedicamentosMaisPrescritoBean.medicamentosMaisPrescritos}"
                                    var="m">
                            <p:column headerText="Medicamento">
                                <h:outputText value="#{m.nomeMedicamento}" />
                            </p:column>
                            <p:column headerText="Total de PrescriÃ§Ãµes">
                                <h:outputText value="#{m.quantidadePrescricoes}" />
                            </p:column>
                        </p:dataTable>
                    </p:panel>
                </p:tab>

                <p:tab id="abaPacientes" title="ðŸ§â€â™‚ï¸ Pacientes com Mais Medicamentos">
                    <p:panel header="Top 2 Pacientes com Mais Medicamentos Prescritos">
                        <p:dataTable id="tabelaPacientes"
                                    value="#{relatorioMedicamentosMaisPrescritoBean.pacientesMaisMedicamentos}"
                                    var="p">
                            <p:column headerText="Paciente">
                                <h:outputText value="#{p.nomePaciente}" />
                            </p:column>
                            <p:column headerText="Qtd. Medicamentos">
                                <h:outputText value="#{p.quantidadeMedicamentos}" />
                            </p:column>
                        </p:dataTable>
                    </p:panel>
                </p:tab>
            </p:tabView>


        </h:form>
    </ui:define>
</ui:composition>
